version: 2.1
jobs:
  build:
    docker: 
      - image: postgres:11.1-alpine
        auth:
          username: mydockerhub-user
          password: $DOCKERHUB_PASSWORD
        environment:
          POSTGRES_HOST=localhost
          POSTGRES_USER=apolonskyi
          POSTGRES_PASSWORD=Passw0rd!
          POSTGRES_DB=todo-list
      - image: node:12.13.1
    steps:
      - checkout
      - run: 'ls'
      - run: '$DOCKERHUB_PASSWORD'
      - run: './postgres-db.sh'
      - run: 'npm i'
      - run: 'npm start'
