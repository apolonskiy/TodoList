version: 2.1
jobs:
  build:
    working_directory: ~/myapp
    docker:
      - image: node:12.13.1
        environment:
          PGHOST: 127.0.0.1
          PGUSER: apolonskyi
      - image: postgres:11.1-alpine
        environment:
          POSTGRES_HOST=localhost
          POSTGRES_USER=apolonskyi
          POSTGRES_PASSWORD=Passw0rd!
          POSTGRES_DB=todo-list
      
    steps:
      - checkout
#       - run: './postgres-db.sh'
      - run: npm install -g ts-node
      - run: 'npm i'
      - run: 'ls'
      - run: 'npm start'
